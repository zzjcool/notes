<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Go标准库 - container包与sort包 sort包 sort包提供了用于对切片和用户定义的集合进行排序的功能。它支持对基本数据类型和用户自"><title>Go标准库 - container包与sort包</title>
<link rel=canonical href=/p/go%E6%A0%87%E5%87%86%E5%BA%93-container%E5%8C%85%E4%B8%8Esort%E5%8C%85/><link rel=stylesheet href=/scss/style.min.775dbd4fd34fda61c5273b4bc3415f7c9666414fb6c40aab164a7ded4397da98.css><meta property="og:title" content="Go标准库 - container包与sort包"><meta property="og:description" content="Go标准库 - container包与sort包 sort包 sort包提供了用于对切片和用户定义的集合进行排序的功能。它支持对基本数据类型和用户自"><meta property="og:url" content="/p/go%E6%A0%87%E5%87%86%E5%BA%93-container%E5%8C%85%E4%B8%8Esort%E5%8C%85/"><meta property="og:site_name" content="zzj的笔记"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="go"><meta property="article:tag" content="标准库"><meta property="article:published_time" content="2025-02-19T00:00:00+00:00"><meta property="article:modified_time" content="2025-02-19T00:00:00+00:00"><meta name=twitter:title content="Go标准库 - container包与sort包"><meta name=twitter:description content="Go标准库 - container包与sort包 sort包 sort包提供了用于对切片和用户定义的集合进行排序的功能。它支持对基本数据类型和用户自"></head><body class="article-page has-toc"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>返回</span></a></div><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/p/go%E6%A0%87%E5%87%86%E5%BA%93-container%E5%8C%85%E4%B8%8Esort%E5%8C%85/>Go标准库 - container包与sort包</a></h2><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 19, 2025</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 10 分钟</time></div></footer></div></header><section class=article-content><h1 id=go标准库---container包与sort包>Go标准库 - container包与sort包</h1><h2 id=sort包>sort包</h2><p><code>sort</code>包提供了用于对切片和用户定义的集合进行排序的功能。它支持对基本数据类型和用户自定义集合的排序。</p><h3 id=结构和方法>结构和方法</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// 基础接口
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Interface</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span>           <span class=c1>// 集合中的元素数量
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>Less</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=c1>// 第i个元素是否应排在第j个元素前面
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>Swap</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span>      <span class=c1>// 交换第i个和第j个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 主要函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Sort</span><span class=p>(</span><span class=nx>data</span> <span class=nx>Interface</span><span class=p>)</span>                        <span class=c1>// 对数据进行排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Stable</span><span class=p>(</span><span class=nx>data</span> <span class=nx>Interface</span><span class=p>)</span>                      <span class=c1>// 稳定排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>IsSorted</span><span class=p>(</span><span class=nx>data</span> <span class=nx>Interface</span><span class=p>)</span> <span class=kt>bool</span>               <span class=c1>// 判断是否已经排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Reverse</span><span class=p>(</span><span class=nx>data</span> <span class=nx>Interface</span><span class=p>)</span> <span class=nx>Interface</span>           <span class=c1>// 返回逆序排序的包装器
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Search</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>f</span> <span class=kd>func</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span><span class=p>)</span> <span class=kt>int</span>        <span class=c1>// 二分查找
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 切片排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Slice</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>less</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span><span class=p>)</span>     <span class=c1>// 使用less函数对切片进行排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>SliceStable</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>less</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span><span class=p>)</span> <span class=c1>// 稳定排序版本
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>SliceIsSorted</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>less</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span><span class=p>)</span> <span class=kt>bool</span> <span class=c1>// 判断切片是否已排序
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 基本类型切片排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Float64s</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>float64</span><span class=p>)</span>                      <span class=c1>// 浮点数切片排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Float64sAreSorted</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>float64</span><span class=p>)</span> <span class=kt>bool</span>        <span class=c1>// 判断浮点数切片是否已排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Ints</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>int</span><span class=p>)</span>                              <span class=c1>// 整数切片排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>IntsAreSorted</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span>                <span class=c1>// 判断整数切片是否已排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Strings</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span>                        <span class=c1>// 字符串切片排序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>StringsAreSorted</span><span class=p>(</span><span class=nx>x</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span>          <span class=c1>// 判断字符串切片是否已排序
</span></span></span></code></pre></div><h3 id=使用示例>使用示例</h3><ol><li>基本排序（使用 <code>sort.Slice</code>）：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sort&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>people</span> <span class=o>:=</span> <span class=p>[]</span><span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>Age</span>  <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=p>}{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Bob&#34;</span><span class=p>,</span> <span class=mi>31</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;John&#34;</span><span class=p>,</span> <span class=mi>42</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Michael&#34;</span><span class=p>,</span> <span class=mi>17</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Jenny&#34;</span><span class=p>,</span> <span class=mi>26</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 使用 sort.Slice 进行排序
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>sort</span><span class=p>.</span><span class=nf>Slice</span><span class=p>(</span><span class=nx>people</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>people</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>Age</span> <span class=p>&lt;</span> <span class=nx>people</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>Age</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;按年龄升序:&#34;</span><span class=p>,</span> <span class=nx>people</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 反向排序
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>sort</span><span class=p>.</span><span class=nf>Slice</span><span class=p>(</span><span class=nx>people</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>people</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>Age</span> <span class=p>&gt;</span> <span class=nx>people</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>Age</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;按年龄降序:&#34;</span><span class=p>,</span> <span class=nx>people</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=2><li>实现 <code>sort.Interface</code>（传统方式）：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Age</span>  <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ByAge 实现 sort.Interface
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>ByAge</span> <span class=p>[]</span><span class=nx>Person</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>a</span> <span class=nx>ByAge</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span>           <span class=p>{</span> <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>a</span> <span class=nx>ByAge</span><span class=p>)</span> <span class=nf>Swap</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span>      <span class=p>{</span> <span class=nx>a</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=nx>a</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>=</span> <span class=nx>a</span><span class=p>[</span><span class=nx>j</span><span class=p>],</span> <span class=nx>a</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>a</span> <span class=nx>ByAge</span><span class=p>)</span> <span class=nf>Less</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>a</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>Age</span> <span class=p>&lt;</span> <span class=nx>a</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>Age</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>people</span> <span class=o>:=</span> <span class=p>[]</span><span class=nx>Person</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Bob&#34;</span><span class=p>,</span> <span class=mi>31</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;John&#34;</span><span class=p>,</span> <span class=mi>42</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Michael&#34;</span><span class=p>,</span> <span class=mi>17</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Jenny&#34;</span><span class=p>,</span> <span class=mi>26</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>sort</span><span class=p>.</span><span class=nf>Sort</span><span class=p>(</span><span class=nf>ByAge</span><span class=p>(</span><span class=nx>people</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;排序后:&#34;</span><span class=p>,</span> <span class=nx>people</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=3><li>多字段可编程排序：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// 定义基础类型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Planet</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>     <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>mass</span>     <span class=kt>float64</span>
</span></span><span class=line><span class=cl>    <span class=nx>distance</span> <span class=kt>float64</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 定义排序函数类型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>By</span> <span class=kd>func</span><span class=p>(</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span> <span class=o>*</span><span class=nx>Planet</span><span class=p>)</span> <span class=kt>bool</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 实现Sort方法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>by</span> <span class=nx>By</span><span class=p>)</span> <span class=nf>Sort</span><span class=p>(</span><span class=nx>planets</span> <span class=p>[]</span><span class=nx>Planet</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ps</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>planetSorter</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>planets</span><span class=p>:</span> <span class=nx>planets</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>by</span><span class=p>:</span>      <span class=nx>by</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>sort</span><span class=p>.</span><span class=nf>Sort</span><span class=p>(</span><span class=nx>ps</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 实现sort.Interface
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>planetSorter</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>planets</span> <span class=p>[]</span><span class=nx>Planet</span>
</span></span><span class=line><span class=cl>    <span class=nx>by</span>      <span class=kd>func</span><span class=p>(</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span> <span class=o>*</span><span class=nx>Planet</span><span class=p>)</span> <span class=kt>bool</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>planetSorter</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span> <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>planetSorter</span><span class=p>)</span> <span class=nf>Swap</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span> <span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>=</span> <span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>[</span><span class=nx>j</span><span class=p>],</span> <span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>planetSorter</span><span class=p>)</span> <span class=nf>Less</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>s</span><span class=p>.</span><span class=nf>by</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=o>&amp;</span><span class=nx>s</span><span class=p>.</span><span class=nx>planets</span><span class=p>[</span><span class=nx>j</span><span class=p>])</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>planets</span> <span class=o>:=</span> <span class=p>[]</span><span class=nx>Planet</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Mercury&#34;</span><span class=p>,</span> <span class=mf>0.055</span><span class=p>,</span> <span class=mf>0.4</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Venus&#34;</span><span class=p>,</span> <span class=mf>0.815</span><span class=p>,</span> <span class=mf>0.7</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Earth&#34;</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;Mars&#34;</span><span class=p>,</span> <span class=mf>0.107</span><span class=p>,</span> <span class=mf>1.5</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 定义不同的排序规则
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>name</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span> <span class=o>*</span><span class=nx>Planet</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>name</span> <span class=p>&lt;</span> <span class=nx>p2</span><span class=p>.</span><span class=nx>name</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>mass</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span> <span class=o>*</span><span class=nx>Planet</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>mass</span> <span class=p>&lt;</span> <span class=nx>p2</span><span class=p>.</span><span class=nx>mass</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>distance</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>p1</span><span class=p>,</span> <span class=nx>p2</span> <span class=o>*</span><span class=nx>Planet</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>distance</span> <span class=p>&lt;</span> <span class=nx>p2</span><span class=p>.</span><span class=nx>distance</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 使用不同规则排序
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>By</span><span class=p>(</span><span class=nx>name</span><span class=p>).</span><span class=nf>Sort</span><span class=p>(</span><span class=nx>planets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;按名称排序:&#34;</span><span class=p>,</span> <span class=nx>planets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nf>By</span><span class=p>(</span><span class=nx>mass</span><span class=p>).</span><span class=nf>Sort</span><span class=p>(</span><span class=nx>planets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;按质量排序:&#34;</span><span class=p>,</span> <span class=nx>planets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nf>By</span><span class=p>(</span><span class=nx>distance</span><span class=p>).</span><span class=nf>Sort</span><span class=p>(</span><span class=nx>planets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;按距离排序:&#34;</span><span class=p>,</span> <span class=nx>planets</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=4><li>使用二分查找：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>numbers</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>28</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 查找大于等于13的第一个数的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>x</span> <span class=o>:=</span> <span class=mi>13</span>
</span></span><span class=line><span class=cl>    <span class=nx>i</span> <span class=o>:=</span> <span class=nx>sort</span><span class=p>.</span><span class=nf>Search</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>numbers</span><span class=p>),</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>numbers</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=nx>x</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>numbers</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;找到最小的大于等于%d的数：%d\n&#34;</span><span class=p>,</span> <span class=nx>x</span><span class=p>,</span> <span class=nx>numbers</span><span class=p>[</span><span class=nx>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=性能特征>性能特征</h3><ol><li><p>时间复杂度：</p><ul><li>一般排序：O(n log n)</li><li>稳定排序：O(n log n)</li><li>二分查找：O(log n)</li></ul></li><li><p>空间复杂度：</p><ul><li><code>Sort</code>：O(log n)</li><li><code>Stable</code>：O(n)</li></ul></li></ol><h3 id=使用建议>使用建议</h3><ol><li><p>优先使用 <code>sort.Slice</code> 和 <code>sort.SliceStable</code>：</p><ul><li>代码更简洁</li><li>无需定义新类型</li><li>可以直接使用闭包访问外部变量</li></ul></li><li><p>在以下情况下实现 <code>sort.Interface</code>：</p><ul><li>需要频繁复用的排序逻辑</li><li>需要在包级别提供排序功能</li><li>需要更好的代码组织和封装</li></ul></li><li><p>使用 <code>sort.Stable</code> 当：</p><ul><li>需要保持相等元素的原始顺序</li><li>排序结果需要稳定性保证</li></ul></li><li><p>高级排序技巧：</p><ul><li>使用 <code>sort.Reverse</code> 实现降序排序</li><li>实现多字段排序时考虑使用可编程排序模式</li><li>对于已排序的数据，使用 <code>sort.Search</code> 进行高效查找</li></ul></li></ol><h2 id=container包>container包</h2><p>Go语言的<code>container</code>包提供了三个通用的容器数据结构实现：</p><ul><li><code>container/heap</code>: 堆实现</li><li><code>container/list</code>: 双向链表实现</li><li><code>container/ring</code>: 循环链表实现</li></ul><h3 id=containerheap包>container/heap包</h3><p><code>heap</code>包提供了堆（优先队列）的实现。堆是一个树形数据结构，其中每个父节点的值都小于或等于其子节点的值（最小堆）或大于或等于其子节点的值（最大堆）。</p><h4 id=接口和方法>接口和方法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// heap.Interface 接口定义了堆操作所需的方法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Interface</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sort</span><span class=p>.</span><span class=nx>Interface</span>           <span class=c1>// 继承 Len()、Less(i, j int)、Swap(i, j int)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>Push</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>)</span>             <span class=c1>// 添加x到末尾
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>Pop</span><span class=p>()</span> <span class=nx>any</span>               <span class=c1>// 移除并返回最后一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 包级函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Init</span><span class=p>(</span><span class=nx>h</span> <span class=nx>Interface</span><span class=p>)</span>      <span class=c1>// 将数据初始化为一个堆
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Push</span><span class=p>(</span><span class=nx>h</span> <span class=nx>Interface</span><span class=p>,</span> <span class=nx>x</span> <span class=nx>any</span><span class=p>)</span> <span class=c1>// 将元素x压入堆
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Pop</span><span class=p>(</span><span class=nx>h</span> <span class=nx>Interface</span><span class=p>)</span> <span class=nx>any</span>   <span class=c1>// 弹出并返回堆顶元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Remove</span><span class=p>(</span><span class=nx>h</span> <span class=nx>Interface</span><span class=p>,</span> <span class=nx>i</span> <span class=kt>int</span><span class=p>)</span> <span class=nx>any</span> <span class=c1>// 移除索引i处的元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Fix</span><span class=p>(</span><span class=nx>h</span> <span class=nx>Interface</span><span class=p>,</span> <span class=nx>i</span> <span class=kt>int</span><span class=p>)</span>  <span class=c1>// 重新建立索引i处元素的堆排序
</span></span></span></code></pre></div><h4 id=使用示例-1>使用示例</h4><ol><li>基本整数最小堆：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;container/heap&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// IntHeap 是一个由整数组成的最小堆
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>IntHeap</span> <span class=p>[]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=nx>IntHeap</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span>           <span class=p>{</span> <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=nx>h</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=nx>IntHeap</span><span class=p>)</span> <span class=nf>Less</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>&lt;</span> <span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=nx>IntHeap</span><span class=p>)</span> <span class=nf>Swap</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span>      <span class=p>{</span> <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>=</span> <span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>],</span> <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>IntHeap</span><span class=p>)</span> <span class=nf>Push</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>h</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=o>*</span><span class=nx>h</span><span class=p>,</span> <span class=nx>x</span><span class=p>.(</span><span class=kt>int</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>IntHeap</span><span class=p>)</span> <span class=nf>Pop</span><span class=p>()</span> <span class=nx>any</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>old</span> <span class=o>:=</span> <span class=o>*</span><span class=nx>h</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=nx>old</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span> <span class=o>:=</span> <span class=nx>old</span><span class=p>[</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>h</span> <span class=p>=</span> <span class=nx>old</span><span class=p>[</span><span class=mi>0</span> <span class=p>:</span> <span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>x</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>h</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>IntHeap</span><span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Init</span><span class=p>(</span><span class=nx>h</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=nx>h</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;最小值: %d\n&#34;</span><span class=p>,</span> <span class=p>(</span><span class=o>*</span><span class=nx>h</span><span class=p>)[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>h</span><span class=p>.</span><span class=nf>Len</span><span class=p>()</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%d &#34;</span><span class=p>,</span> <span class=nx>heap</span><span class=p>.</span><span class=nf>Pop</span><span class=p>(</span><span class=nx>h</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=2><li>优先队列实现：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Item 表示优先队列中的一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Item</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span>    <span class=kt>string</span> <span class=c1>// 元素的值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>priority</span> <span class=kt>int</span>    <span class=c1>// 元素的优先级
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>index</span>    <span class=kt>int</span>    <span class=c1>// 元素在堆中的索引
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// PriorityQueue 实现了 heap.Interface 接口
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>PriorityQueue</span> <span class=p>[]</span><span class=o>*</span><span class=nx>Item</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>pq</span> <span class=nx>PriorityQueue</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span> <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=nx>pq</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>pq</span> <span class=nx>PriorityQueue</span><span class=p>)</span> <span class=nf>Less</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>pq</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>priority</span> <span class=p>&lt;</span> <span class=nx>pq</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>priority</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>pq</span> <span class=nx>PriorityQueue</span><span class=p>)</span> <span class=nf>Swap</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>pq</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=nx>pq</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>=</span> <span class=nx>pq</span><span class=p>[</span><span class=nx>j</span><span class=p>],</span> <span class=nx>pq</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>pq</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>index</span> <span class=p>=</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>    <span class=nx>pq</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>index</span> <span class=p>=</span> <span class=nx>j</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>pq</span> <span class=o>*</span><span class=nx>PriorityQueue</span><span class=p>)</span> <span class=nf>Push</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=o>*</span><span class=nx>pq</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>item</span> <span class=o>:=</span> <span class=nx>x</span><span class=p>.(</span><span class=o>*</span><span class=nx>Item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>item</span><span class=p>.</span><span class=nx>index</span> <span class=p>=</span> <span class=nx>n</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>pq</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=o>*</span><span class=nx>pq</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>pq</span> <span class=o>*</span><span class=nx>PriorityQueue</span><span class=p>)</span> <span class=nf>Pop</span><span class=p>()</span> <span class=nx>any</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>old</span> <span class=o>:=</span> <span class=o>*</span><span class=nx>pq</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=nx>old</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>item</span> <span class=o>:=</span> <span class=nx>old</span><span class=p>[</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>old</span><span class=p>[</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=p>=</span> <span class=kc>nil</span>  <span class=c1>// 避免内存泄漏
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>item</span><span class=p>.</span><span class=nx>index</span> <span class=p>=</span> <span class=o>-</span><span class=mi>1</span> <span class=c1>// 为了安全
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>*</span><span class=nx>pq</span> <span class=p>=</span> <span class=nx>old</span><span class=p>[</span><span class=mi>0</span> <span class=p>:</span> <span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>item</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 更新修改优先队列中的项
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>pq</span> <span class=o>*</span><span class=nx>PriorityQueue</span><span class=p>)</span> <span class=nf>update</span><span class=p>(</span><span class=nx>item</span> <span class=o>*</span><span class=nx>Item</span><span class=p>,</span> <span class=nx>value</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>priority</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>item</span><span class=p>.</span><span class=nx>value</span> <span class=p>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=nx>item</span><span class=p>.</span><span class=nx>priority</span> <span class=p>=</span> <span class=nx>priority</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Fix</span><span class=p>(</span><span class=nx>pq</span><span class=p>,</span> <span class=nx>item</span><span class=p>.</span><span class=nx>index</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建一个优先队列并添加一些项
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>items</span> <span class=o>:=</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;任务1&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;任务2&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;任务3&#34;</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>pq</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=nx>PriorityQueue</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>items</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>priority</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>items</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>pq</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>Item</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>value</span><span class=p>:</span>    <span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>priority</span><span class=p>:</span> <span class=nx>priority</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>index</span><span class=p>:</span>    <span class=nx>i</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>i</span><span class=o>++</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Init</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>pq</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 插入一个新元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>item</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>Item</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>value</span><span class=p>:</span>    <span class=s>&#34;任务4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>priority</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>pq</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 更新一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>pq</span><span class=p>.</span><span class=nf>update</span><span class=p>(</span><span class=nx>item</span><span class=p>,</span> <span class=s>&#34;任务4-更新&#34;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 按优先级顺序取出所有元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>pq</span><span class=p>.</span><span class=nf>Len</span><span class=p>()</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>item</span> <span class=o>:=</span> <span class=nx>heap</span><span class=p>.</span><span class=nf>Pop</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>pq</span><span class=p>).(</span><span class=o>*</span><span class=nx>Item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%.2d:%s &#34;</span><span class=p>,</span> <span class=nx>item</span><span class=p>.</span><span class=nx>priority</span><span class=p>,</span> <span class=nx>item</span><span class=p>.</span><span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=3><li>定时器实现示例：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Timer</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>expiry</span>   <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>    <span class=nx>callback</span> <span class=kd>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>index</span>    <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>TimerHeap</span> <span class=p>[]</span><span class=o>*</span><span class=nx>Timer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=nx>TimerHeap</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span> <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=nx>h</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=nx>TimerHeap</span><span class=p>)</span> <span class=nf>Less</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>expiry</span><span class=p>.</span><span class=nf>Before</span><span class=p>(</span><span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>expiry</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=nx>TimerHeap</span><span class=p>)</span> <span class=nf>Swap</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>],</span> <span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>=</span> <span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>],</span> <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>h</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>index</span> <span class=p>=</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>    <span class=nx>h</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>index</span> <span class=p>=</span> <span class=nx>j</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>TimerHeap</span><span class=p>)</span> <span class=nf>Push</span><span class=p>(</span><span class=nx>x</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=o>*</span><span class=nx>h</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>timer</span> <span class=o>:=</span> <span class=nx>x</span><span class=p>.(</span><span class=o>*</span><span class=nx>Timer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>timer</span><span class=p>.</span><span class=nx>index</span> <span class=p>=</span> <span class=nx>n</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>h</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=o>*</span><span class=nx>h</span><span class=p>,</span> <span class=nx>timer</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>h</span> <span class=o>*</span><span class=nx>TimerHeap</span><span class=p>)</span> <span class=nf>Pop</span><span class=p>()</span> <span class=nx>any</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>old</span> <span class=o>:=</span> <span class=o>*</span><span class=nx>h</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=nx>old</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>timer</span> <span class=o>:=</span> <span class=nx>old</span><span class=p>[</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>old</span><span class=p>[</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=p>=</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>    <span class=nx>timer</span><span class=p>.</span><span class=nx>index</span> <span class=p>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>h</span> <span class=p>=</span> <span class=nx>old</span><span class=p>[</span><span class=mi>0</span> <span class=p>:</span> <span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>timer</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>th</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>TimerHeap</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Init</span><span class=p>(</span><span class=nx>th</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 添加定时器
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>now</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=nx>th</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>Timer</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>expiry</span><span class=p>:</span>   <span class=nx>now</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>callback</span><span class=p>:</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Timer 1 expired&#34;</span><span class=p>)</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>heap</span><span class=p>.</span><span class=nf>Push</span><span class=p>(</span><span class=nx>th</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>Timer</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>expiry</span><span class=p>:</span>   <span class=nx>now</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>callback</span><span class=p>:</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Timer 2 expired&#34;</span><span class=p>)</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 模拟定时器触发
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>th</span><span class=p>.</span><span class=nf>Len</span><span class=p>()</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>timer</span> <span class=o>:=</span> <span class=nx>heap</span><span class=p>.</span><span class=nf>Pop</span><span class=p>(</span><span class=nx>th</span><span class=p>).(</span><span class=o>*</span><span class=nx>Timer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Timer will expire at: %v\n&#34;</span><span class=p>,</span> <span class=nx>timer</span><span class=p>.</span><span class=nx>expiry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=性能特征-1>性能特征</h4><ol><li><p>时间复杂度：</p><ul><li>Push：O(log n)</li><li>Pop：O(log n)</li><li>Remove：O(log n)</li><li>Fix：O(log n)</li><li>Init：O(n)</li><li>Top（查看堆顶）：O(1)</li></ul></li><li><p>空间复杂度：</p><ul><li>存储：O(n)</li><li>每个操作的额外空间：O(1)</li></ul></li></ol><h4 id=使用建议-1>使用建议</h4><ol><li><p>适用场景：</p><ul><li>优先队列实现</li><li>任务调度系统</li><li>事件定时器</li><li>数据流中位数计算</li><li>Dijkstra最短路径算法</li><li>合并多个有序序列</li></ul></li><li><p>最佳实践：</p><ul><li>优先使用 <code>heap</code> 包提供的函数而不是直接操作底层切片</li><li>实现 <code>heap.Interface</code> 时注意维护元素的索引</li><li>使用指针接收器来避免不必要的复制</li><li>在 <code>Pop</code> 方法中将移除的元素置为 nil 以避免内存泄漏</li></ul></li><li><p>注意事项：</p><ul><li>堆的第一个元素（索引0）始终是最小值（最小堆）</li><li>修改堆中元素后需要调用 <code>Fix</code> 来维护堆的性质</li><li><code>Push</code> 和 <code>Pop</code> 方法操作的是切片的末尾元素</li><li>确保正确实现 <code>Less</code> 方法以决定最小堆或最大堆</li></ul></li><li><p>替代方案：</p><ul><li>需要有序集合时考虑使用 <code>sort</code> 包</li><li>需要快速查找时考虑使用 <code>map</code></li><li>需要并发安全的优先队列时考虑使用 channel</li><li>需要持久化的优先队列时考虑使用数据库</li></ul></li></ol><h3 id=containerlist包>container/list包</h3><p><code>list</code>包实现了一个双向链表。双向链表中的每个节点都包含一个值和两个指针，分别指向前一个节点和后一个节点。</p><h4 id=结构和方法-1>结构和方法</h4><p><code>List</code> 结构体定义：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>List</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>root</span> <span class=nx>Element</span>  <span class=c1>// 哨兵节点，root.next 指向第一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>len</span>  <span class=kt>int</span>     <span class=c1>// 当前链表长度
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Element</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>,</span> <span class=nx>prev</span> <span class=o>*</span><span class=nx>Element</span>  <span class=c1>// 下一个和前一个元素的指针
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>list</span> <span class=o>*</span><span class=nx>List</span>          <span class=c1>// 元素所属的链表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>Value</span> <span class=nx>any</span>           <span class=c1>// 元素值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 主要方法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>New</span><span class=p>()</span> <span class=o>*</span><span class=nx>List</span>          <span class=c1>// 创建一个新的链表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>Init</span><span class=p>()</span>     <span class=c1>// 初始化或清空链表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>Front</span><span class=p>()</span> <span class=o>*</span><span class=nx>Element</span>  <span class=c1>// 返回第一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>Back</span><span class=p>()</span> <span class=o>*</span><span class=nx>Element</span>   <span class=c1>// 返回最后一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span>         <span class=c1>// 返回链表长度
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>PushFront</span><span class=p>(</span><span class=nx>v</span> <span class=nx>any</span><span class=p>)</span>  <span class=c1>// 在链表前端插入元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>PushBack</span><span class=p>(</span><span class=nx>v</span> <span class=nx>any</span><span class=p>)</span>    <span class=c1>// 在链表后端插入元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>InsertBefore</span><span class=p>(</span><span class=nx>v</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>mark</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span> <span class=c1>// 在指定元素前插入
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>InsertAfter</span><span class=p>(</span><span class=nx>v</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>mark</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span>  <span class=c1>// 在指定元素后插入
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>PushFrontList</span><span class=p>(</span><span class=nx>other</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span>         <span class=c1>// 在链表前端插入另一个链表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>PushBackList</span><span class=p>(</span><span class=nx>other</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span>          <span class=c1>// 在链表后端插入另一个链表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>MoveToFront</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span>            <span class=c1>// 将元素移到链表前端
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>MoveToBack</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span>             <span class=c1>// 将元素移到链表后端
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>MoveBefore</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>mark</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span>       <span class=c1>// 将元素移到指定元素之前
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>MoveAfter</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>mark</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span>        <span class=c1>// 将元素移到指定元素之后
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>l</span> <span class=o>*</span><span class=nx>List</span><span class=p>)</span> <span class=nf>Remove</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>Element</span><span class=p>)</span>                 <span class=c1>// 移除指定元素
</span></span></span></code></pre></div><h4 id=使用示例-2>使用示例</h4><ol><li>基本操作示例：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;container/list&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建新链表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>l</span> <span class=o>:=</span> <span class=nx>list</span><span class=p>.</span><span class=nf>New</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 在后面添加元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>l</span><span class=p>.</span><span class=nf>PushBack</span><span class=p>(</span><span class=s>&#34;first&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>l</span><span class=p>.</span><span class=nf>PushBack</span><span class=p>(</span><span class=s>&#34;second&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 在前面添加元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>l</span><span class=p>.</span><span class=nf>PushFront</span><span class=p>(</span><span class=s>&#34;zero&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 遍历并打印
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>e</span> <span class=o>:=</span> <span class=nx>l</span><span class=p>.</span><span class=nf>Front</span><span class=p>();</span> <span class=nx>e</span> <span class=o>!=</span> <span class=kc>nil</span><span class=p>;</span> <span class=nx>e</span> <span class=p>=</span> <span class=nx>e</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v &#34;</span><span class=p>,</span> <span class=nx>e</span><span class=p>.</span><span class=nx>Value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 输出: zero first second
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><ol start=2><li>元素操作示例：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>listOperations</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>l</span> <span class=o>:=</span> <span class=nx>list</span><span class=p>.</span><span class=nf>New</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 添加元素并保存引用
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>e4</span> <span class=o>:=</span> <span class=nx>l</span><span class=p>.</span><span class=nf>PushBack</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>e1</span> <span class=o>:=</span> <span class=nx>l</span><span class=p>.</span><span class=nf>PushFront</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 在特定位置插入
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>l</span><span class=p>.</span><span class=nf>InsertBefore</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=nx>e4</span><span class=p>)</span>  <span class=c1>// 在4前插入3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>l</span><span class=p>.</span><span class=nf>InsertAfter</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=nx>e1</span><span class=p>)</span>   <span class=c1>// 在1后插入2
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=c1>// 移动元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>e</span> <span class=o>:=</span> <span class=nx>l</span><span class=p>.</span><span class=nf>Front</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>l</span><span class=p>.</span><span class=nf>MoveToBack</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span>  <span class=c1>// 将第一个元素移到末尾
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=c1>// 删除元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>l</span><span class=p>.</span><span class=nf>Remove</span><span class=p>(</span><span class=nx>e4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=3><li>实现LRU缓存示例：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>LRUCache</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>capacity</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>cache</span>    <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=o>*</span><span class=nx>list</span><span class=p>.</span><span class=nx>Element</span>
</span></span><span class=line><span class=cl>    <span class=nx>list</span>     <span class=o>*</span><span class=nx>list</span><span class=p>.</span><span class=nx>List</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewLRUCache</span><span class=p>(</span><span class=nx>capacity</span> <span class=kt>int</span><span class=p>)</span> <span class=o>*</span><span class=nx>LRUCache</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>LRUCache</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>capacity</span><span class=p>:</span> <span class=nx>capacity</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>cache</span><span class=p>:</span>    <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=o>*</span><span class=nx>list</span><span class=p>.</span><span class=nx>Element</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>list</span><span class=p>:</span>     <span class=nx>list</span><span class=p>.</span><span class=nf>New</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>LRUCache</span><span class=p>)</span> <span class=nf>Get</span><span class=p>(</span><span class=nx>key</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>bool</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>elem</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>cache</span><span class=p>[</span><span class=nx>key</span><span class=p>];</span> <span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>c</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nf>MoveToFront</span><span class=p>(</span><span class=nx>elem</span><span class=p>)</span>  <span class=c1>// 最近访问的移到前面
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=nx>elem</span><span class=p>.</span><span class=nx>Value</span><span class=p>.(</span><span class=kt>string</span><span class=p>),</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>LRUCache</span><span class=p>)</span> <span class=nf>Put</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>elem</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>cache</span><span class=p>[</span><span class=nx>key</span><span class=p>];</span> <span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>c</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nf>MoveToFront</span><span class=p>(</span><span class=nx>elem</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>elem</span><span class=p>.</span><span class=nx>Value</span> <span class=p>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>c</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nf>Len</span><span class=p>()</span> <span class=o>&gt;=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>capacity</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 删除最久未使用的元素
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>back</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nf>Back</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>delete</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>cache</span><span class=p>,</span> <span class=nx>back</span><span class=p>.</span><span class=nx>Value</span><span class=p>.(</span><span class=kt>string</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=nx>c</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nf>Remove</span><span class=p>(</span><span class=nx>back</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 添加新元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>elem</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nf>PushFront</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>.</span><span class=nx>cache</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=p>=</span> <span class=nx>elem</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=性能特征-2>性能特征</h4><ol><li><p>时间复杂度：</p><ul><li>插入/删除：O(1)</li><li>查找：O(n)</li><li>访问头尾元素：O(1)</li></ul></li><li><p>空间复杂度：</p><ul><li>每个节点需要额外的前后指针存储空间</li><li>总体空间复杂度：O(n)</li></ul></li></ol><h4 id=适用场景>适用场景</h4><ol><li>LRU（最近最少使用）缓存</li><li>任务队列</li><li>历史记录管理</li><li>撤销/重做功能实现</li><li>需要频繁插入删除的场景</li><li>需要双向遍历的场景</li></ol><h4 id=使用建议-2>使用建议</h4><ol><li>当需要频繁的插入、删除操作时，优先使用 <code>list</code> 而不是切片</li><li>如果主要是随机访问操作，建议使用切片而不是链表</li><li>注意保存 <code>Element</code> 指针以便快速操作特定元素</li><li>使用 <code>Remove</code> 方法删除元素时要确保元素确实在链表中</li></ol><h3 id=containerring包>container/ring包</h3><p><code>ring</code>包实现了环形链表的操作。环形链表是一种特殊的链表，其中最后一个元素指向第一个元素，形成一个环。</p><h4 id=结构和方法-2>结构和方法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Ring 是环形链表的一个元素，也代表整个环
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Ring</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>,</span> <span class=nx>prev</span> <span class=o>*</span><span class=nx>Ring</span>
</span></span><span class=line><span class=cl>    <span class=nx>Value</span>      <span class=nx>any</span>    <span class=c1>// 用于存储元素值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 主要方法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>New</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=o>*</span><span class=nx>Ring</span>                     <span class=c1>// 创建一个长度为n的环
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Do</span><span class=p>(</span><span class=nx>f</span> <span class=kd>func</span><span class=p>(</span><span class=nx>any</span><span class=p>))</span>           <span class=c1>// 对环中的每个元素执行函数f
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Len</span><span class=p>()</span> <span class=kt>int</span>                 <span class=c1>// 返回环的长度
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Link</span><span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=o>*</span><span class=nx>Ring</span>       <span class=c1>// 将两个环连接在一起
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Move</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=o>*</span><span class=nx>Ring</span>         <span class=c1>// 移动n个位置（n可以是负数）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Next</span><span class=p>()</span> <span class=o>*</span><span class=nx>Ring</span>              <span class=c1>// 返回下一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Prev</span><span class=p>()</span> <span class=o>*</span><span class=nx>Ring</span>              <span class=c1>// 返回前一个元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>Ring</span><span class=p>)</span> <span class=nf>Unlink</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=o>*</span><span class=nx>Ring</span>       <span class=c1>// 从当前元素开始移除n个元素
</span></span></span></code></pre></div><h4 id=使用示例-3>使用示例</h4><ol><li>创建和遍历环：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;container/ring&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建一个长度为5的环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r</span> <span class=o>:=</span> <span class=nx>ring</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 初始化环的值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Len</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>r</span><span class=p>.</span><span class=nx>Value</span> <span class=p>=</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>        <span class=nx>r</span> <span class=p>=</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 使用Do方法遍历环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>p</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%d &#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span> <span class=c1>// 输出: 0 1 2 3 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><ol start=2><li>环的连接和分割：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建两个环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r1</span> <span class=o>:=</span> <span class=nx>ring</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>r2</span> <span class=o>:=</span> <span class=nx>ring</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 初始化第一个环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>r1</span><span class=p>.</span><span class=nf>Len</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>r1</span><span class=p>.</span><span class=nx>Value</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;r1-%d&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>r1</span> <span class=p>=</span> <span class=nx>r1</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 初始化第二个环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>r2</span><span class=p>.</span><span class=nf>Len</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>r2</span><span class=p>.</span><span class=nx>Value</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;r2-%d&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>r2</span> <span class=p>=</span> <span class=nx>r2</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 连接两个环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r3</span> <span class=o>:=</span> <span class=nx>r1</span><span class=p>.</span><span class=nf>Link</span><span class=p>(</span><span class=nx>r2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 遍历新环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r3</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>p</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s &#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span> <span class=c1>// 输出: r1-0 r1-1 r1-2 r2-0 r2-1
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// 分割环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r4</span> <span class=o>:=</span> <span class=nx>r3</span><span class=p>.</span><span class=nf>Unlink</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;第一部分: &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>r3</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>p</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s &#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;第二部分: &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>r4</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>p</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s &#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=3><li>环的移动操作：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建环并初始化
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r</span> <span class=o>:=</span> <span class=nx>ring</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Len</span><span class=p>();</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>r</span><span class=p>.</span><span class=nx>Value</span> <span class=p>=</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>        <span class=nx>r</span> <span class=p>=</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 向前移动2个位置
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r</span> <span class=p>=</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Move</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;当前值: %d\n&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>Value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 向后移动1个位置
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>r</span> <span class=p>=</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Move</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;当前值: %d\n&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nx>Value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 使用Next()和Prev()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;下一个值: %d\n&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Next</span><span class=p>().</span><span class=nx>Value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;前一个值: %d\n&#34;</span><span class=p>,</span> <span class=nx>r</span><span class=p>.</span><span class=nf>Prev</span><span class=p>().</span><span class=nx>Value</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=4><li>实现循环缓冲区：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>CircularBuffer</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>ring</span><span class=p>.</span><span class=nx>Ring</span>
</span></span><span class=line><span class=cl>    <span class=nx>size</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewCircularBuffer</span><span class=p>(</span><span class=nx>size</span> <span class=kt>int</span><span class=p>)</span> <span class=o>*</span><span class=nx>CircularBuffer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>CircularBuffer</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Ring</span><span class=p>:</span> <span class=nx>ring</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>size</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>size</span><span class=p>:</span> <span class=nx>size</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CircularBuffer</span><span class=p>)</span> <span class=nf>Add</span><span class=p>(</span><span class=nx>value</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>.</span><span class=nx>Value</span> <span class=p>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>.</span><span class=nx>Ring</span> <span class=p>=</span> <span class=nx>c</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CircularBuffer</span><span class=p>)</span> <span class=nf>GetAll</span><span class=p>()</span> <span class=p>[]</span><span class=nx>any</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>values</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>any</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>p</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>p</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>values</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>values</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>values</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建一个大小为3的循环缓冲区
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>buffer</span> <span class=o>:=</span> <span class=nf>NewCircularBuffer</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 添加4个元素（第4个会覆盖第1个）
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>buffer</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>buffer</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;B&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>buffer</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;C&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>buffer</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=s>&#34;D&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 获取所有元素
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>values</span> <span class=o>:=</span> <span class=nx>buffer</span><span class=p>.</span><span class=nf>GetAll</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>values</span><span class=p>)</span> <span class=c1>// 输出: [D B C] 或类似序列
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h4 id=性能特征-3>性能特征</h4><ol><li><p>时间复杂度：</p><ul><li>创建环：O(n)</li><li>遍历（Do）：O(n)</li><li>移动（Move）：O(n) 对于大的n；O(1) 对于小的n</li><li>连接（Link）：O(1)</li><li>分割（Unlink）：O(n)</li></ul></li><li><p>空间复杂度：</p><ul><li>基本存储：O(n)</li><li>每个元素额外需要两个指针（next和prev）</li></ul></li></ol><h4 id=适用场景-1>适用场景</h4><ol><li>循环缓冲区</li><li>轮询调度算法</li><li>循环列表处理</li><li>固定大小的循环队列</li></ol><h4 id=使用建议-3>使用建议</h4><ol><li><p>适用场景：</p><ul><li>循环缓冲区实现</li><li>轮询调度算法</li><li>循环列表处理</li><li>固定大小的循环队列</li></ul></li><li><p>最佳实践：</p><ul><li>使用 <code>Do</code> 方法进行安全遍历</li><li>注意保持对环的起始位置的引用</li><li>在修改环结构时要小心处理指针</li><li>考虑使用辅助函数封装常见操作</li></ul></li><li><p>注意事项：</p><ul><li>Ring的零值是一个长度为1的空环</li><li>Link和Unlink操作会改变环的结构</li><li>Move的参数可以是负数，表示反向移动</li><li>Value字段是any类型，使用时需要类型断言</li></ul></li><li><p>替代方案：</p><ul><li>需要动态大小时考虑使用切片</li><li>需要并发安全时考虑使用channel</li><li>需要快速随机访问时考虑使用数组</li></ul></li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/go/>Go</a>
<a href=/tags/%E6%A0%87%E5%87%86%E5%BA%93/>标准库</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 zzj的笔记</section><section class=powerby><br><br><a href=https://beian.miit.gov.cn/ target=_blank>赣ICP备17015735号</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#sort包>sort包</a><ol><li><a href=#结构和方法>结构和方法</a></li><li><a href=#使用示例>使用示例</a></li><li><a href=#性能特征>性能特征</a></li><li><a href=#使用建议>使用建议</a></li></ol></li><li><a href=#container包>container包</a><ol><li><a href=#containerheap包>container/heap包</a><ol><li><a href=#接口和方法>接口和方法</a></li><li><a href=#使用示例-1>使用示例</a></li><li><a href=#性能特征-1>性能特征</a></li><li><a href=#使用建议-1>使用建议</a></li></ol></li><li><a href=#containerlist包>container/list包</a><ol><li><a href=#结构和方法-1>结构和方法</a></li><li><a href=#使用示例-2>使用示例</a></li><li><a href=#性能特征-2>性能特征</a></li><li><a href=#适用场景>适用场景</a></li><li><a href=#使用建议-2>使用建议</a></li></ol></li><li><a href=#containerring包>container/ring包</a><ol><li><a href=#结构和方法-2>结构和方法</a></li><li><a href=#使用示例-3>使用示例</a></li><li><a href=#性能特征-3>性能特征</a></li><li><a href=#适用场景-1>适用场景</a></li><li><a href=#使用建议-3>使用建议</a></li></ol></li></ol></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>